<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="viewport" content="width=750, user-scalable=no">
  <title>Document</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/page2.css">
  <!-- js -->
  <script type="text/javascript" src="./js/util.js"></script>
  <script type="text/javascript" src="./js/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="./js/gsap.min.js"></script> -->
  <script src="js/TweenMax.min.js"></script>
  <script type="text/javascript" src="./js/ScrollMagic.min.js"></script>
  <script type="text/javascript" src="./js/animation.gsap.js"></script>
  <script type="text/javascript" src="./js/debug.addIndicators.js"></script>
  <script type="text/javascript" src="./js/howler.js"></script>
</head>

<body>
  <audio class="audio" muted src="./audios/typing.mp3" style="display:none"></audio>
  <!-- wrap -->
  <div class="wrap">
    <div class="p1" id="p1">
      <div class="rain" id="rain">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain1" id="rain1">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain2" id="rain2">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain3" id="rain3">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain4" id="rain4">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="snow" id="snow">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow1" id="snow1">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow2" id="snow2">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow3" id="snow3">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="bird" id="bird"></div>
      <div class="begin2020">
        <div class="line-1">
          <div class="mark mark-1"></div>
          <p>2020年的开头并不顺利……</p>
        </div>
        <div class="line-2">
          <div class="mark mark-2"></div>
          <p>突如其来的意外</p>
        </div>
        <div class="line-3">
          <div class="mark mark-3"></div>
          <p>打乱了我们的生活</p>
        </div>
        <div class="line-4">
          <div class="mark mark-4"></div>
          <p>隔离在家、视频会议
          </p>
        </div>
        <div class="line-5">
          <div class="mark mark-5"></div>
          <p>远程沟通……
          </p>
        </div>
        <div class="line-6">
          <div class="mark mark-6"></div>
          <p>我们在无限延长的假期中
          </p>
        </div>
        <div class="line-7">
            <div class="mark mark-7"></div>
            <p>等待回归
            </p>
        </div>
      </div>
      <div class="p3">
        <div class="p3-inner">
          <div class="trees">
            <img class="tree1" src="h5imgs/tree1.png" alt="">
            <img class="tree2" src="h5imgs/tree2.png" alt="">
            <img class="tree3" src="h5imgs/tree3.png" alt="">
            <img class="tree4" src="h5imgs/tree4.png" alt="">
            <img class="tree5" src="h5imgs/tree5.png" alt="">
            <img class="tree6" src="h5imgs/tree6.png" alt="">
            <!-- <img class="tree-front" src="h5imgs/tree-front.png" alt=""> -->
            <!-- <img class="tree-back" src="h5imgs/tree-back.jpg" alt=""> -->
          </div>
          <div class="Building">
            <img src="h5imgs/building-off.png" alt="">
            <img src="h5imgs/building-on.png" class="on" alt="">
          </div>
        </div>
      </div>
    </div>
    <div class="mask"></div>
    <div class="p2" id="p2">
      <div class="line">
        <img src="./h5imgs/page2/line.png" alt="">
      </div>
      <div class="star1" id="star1">
        <img src="./h5imgs/page2/star.png" alt="">
      </div>
      <div class="star2" id="star2">
        <img src="./h5imgs/page2/bigStar.png" alt="">
      </div>
    </div>
  </div>
  <script>
    window.onload = function () {
      var soundP1_1 = new Howl({
        src:['audios/typing.mp3']
      })
      soundP1_1.playStatus = true
      
       var controller = new ScrollMagic.Controller();
        var tl = new TimelineMax({
          onUpdate:function () {
            if(soundP1_1.playStatus) {
              soundP1_1.play()
              soundP1_1.playStatus = false
              var timer = setTimeout(function() {
                soundP1_1.playStatus = true
              },1000)
            }
          }
        })
        //文字
        tl.add("begin");
        tl.to("#p1 .line-1", 0, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-1", 5, {
          left: '100%', 
          ease: Linear.easeOut,
          onStart:function () {
            // var vdo = $('.audioAll .audio')[0]; //jquery
            // vdo.play()
            // vdo.muted = false;
            // $('.audioAll .audio')[0].play()
          }
        })
        tl.to("#p1 .line-2", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-2", 5, {
          left: '100%',
          ease: Linear.easeOut,
          onStart:function () {
            // vdo.muted = false;
          }
        })
        tl.to(".line-3", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-3", 5, {
          left: '100%',  
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-4", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-4", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-5", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-5", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-6", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-6", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-7", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-7", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to('.mask',1,{
          opacity:1,
          ease: Linear.easeOut,
        },40)
        tl.to('.mask',1,{
          opacity:0,
          ease: Linear.easeOut,
        },44)
        tl.to("#p1",12, {
          backgroundPosition: "0 100%", 
          ease: Linear.easeOut,
        },0)
        tl.to("#p2",1, {
          backgroundPosition: "0 100%", 
          ease: Linear.easeOut,
        },12)
        // 树木和楼宇
        tl.to("#p1 .p3", .2, {opacity: 1},12);
        tl.to("#p1 .tree1", 6, {left:-$('#p1 .tree1').width()-10},12);
        tl.to("#p1 .tree2", 5, {left: -$('#p1 .tree2').width()-50},12);
        tl.to("#p1 .tree3", 5, {left:-$('#p1 .tree3').width()-100},12);
        tl.to("#p1 .tree4", 6, {left: -$('#p1 .tree4').width()+150},12);
        tl.to("#p1 .tree5", 5, {left: -$('#p1 .tree5').width()+750},12);
        tl.to("#p1 .tree6", 6, {left: -$('#p1 .tree6').width()+1150},12);
        // tl.to("#p1 .tree-front", 12, {left: -$('#p1 .tree-front').width()+1150},12,'label');
        // tl.to("#p1 .tree-back", 8, {left: -$('#p1 .tree-back').width()+750},12);

        tl.to("#p1 .p3-inner", 5, {xPercent: -60},18);
        tl.from("#p1 .on", 8, {opacity: 1},'-=8');
        tl.to("#p1 #bird", 2, {
          css: {
            top:0,
            right:0,
            background: 'url(h5imgs/bird-1.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },1)
        tl.to("#p1 #bird", 2, {
          css: {
            top:150,
            right:200,
            background: 'url(h5imgs/bird-2.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },2)
        tl.to("#p1 #bird", 1, {
          css: {
            top:260,
            right:330,
            background: 'url(h5imgs/bird-3.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },3)
        tl.to("#p1 #bird", 1, {
          css: {
            top:460,
            right:466,
            background: 'url(h5imgs/bird-4.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },4)
        tl.to("#p1 #bird", 1, {
          css: {
            top:770,
            right:490,
            background: 'url(h5imgs/bird-5.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },5)
        tl.to("#p1 #bird", 1, {
          css: {
            top:1030,
            right:290,
            background: 'url(h5imgs/bird-6.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },6)
        tl.to("#p1 #bird", 1, {
          css: {
            top:1200,
            right:-300,
          },
          ease: Linear.easeOut,
        },7)
        tl.to("#p2 .star1", 5, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p2 .star2", 10, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p2 .line", 50, {
          css: {
            top:1220,
            left:50,
            repeat:-1,
          },
          ease: Linear.easeOut,
        })
        var scene = new ScrollMagic.Scene({duration: 5000})
        .triggerHook(0)
        .setPin("#p1")
        .setTween(tl)
        .addTo(controller);
    }
  </script>
</body>

</html>