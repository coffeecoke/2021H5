<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <!-- <meta name="viewport" content="width=device-width, initial-scale=1"> -->
  <meta name="viewport" content="width=750, user-scalable=no">
  <title>Document</title>
  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/p2.css">
  <link rel="stylesheet" href="css/page2.css">
  <!-- js -->
  <script type="text/javascript" src="./js/util.js"></script>
  <script type="text/javascript" src="./js/jquery.min.js"></script>
  <!-- <script type="text/javascript" src="./js/gsap.min.js"></script> -->
  <script src="js/TweenMax.min.js"></script>
  <script type="text/javascript" src="./js/ScrollMagic.min.js"></script>
  <script type="text/javascript" src="./js/animation.gsap.js"></script>
  <script type="text/javascript" src="./js/debug.addIndicators.js"></script>
  <script type="text/javascript" src="./js/howler.js"></script>
</head>

<body>
  <audio class="audio" muted src="./audios/typing.mp3" style="display:none"></audio>
  <!-- wrap -->
  <div class="wrap">
    <div class="p1" id="p1">
      <div class="rain" id="rain">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain1" id="rain1">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain2" id="rain2">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain3" id="rain3">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="rain4" id="rain4">
        <img src="h5imgs/rain2.png" alt="">
      </div>
      <div class="snow" id="snow">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow1" id="snow1">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow2" id="snow2">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="snow3" id="snow3">
        <img src="h5imgs/snow3.png" alt="">
      </div>
      <div class="bird" id="bird"></div>
      <div class="begin2020">
        <div class="line-1">
          <div class="mark mark-1"></div>
          <p>2020年的开头并不顺利……</p>
        </div>
        <div class="line-2">
          <div class="mark mark-2"></div>
          <p>突如其来的意外</p>
        </div>
        <div class="line-3">
          <div class="mark mark-3"></div>
          <p>打乱了我们的生活</p>
        </div>
        <div class="line-4">
          <div class="mark mark-4"></div>
          <p>隔离在家、视频会议
          </p>
        </div>
        <div class="line-5">
          <div class="mark mark-5"></div>
          <p>远程沟通……
          </p>
        </div>
        <div class="line-6">
          <div class="mark mark-6"></div>
          <p>我们在无限延长的假期中
          </p>
        </div>
        <div class="line-7">
            <div class="mark mark-7"></div>
            <p>……</p>
        </div>
      </div>
      <div class="ph">
        <div class="ph-inner">
          <div class="trees">
            <img class="tree1" src="h5imgs/tree1.png" alt="">
            <img class="tree2" src="h5imgs/tree2.png" alt="">
            <img class="tree3" src="h5imgs/tree3.png" alt="">
            <img class="tree4" src="h5imgs/tree4.png" alt="">
            <img class="tree5" src="h5imgs/tree5.png" alt="">
            <img class="tree6" src="h5imgs/tree6.png" alt="">
            <!-- <img class="tree-front" src="h5imgs/tree-front.png" alt=""> -->
            <!-- <img class="tree-back" src="h5imgs/tree-back.jpg" alt=""> -->
          </div>
          <div class="Building">
            <img src="h5imgs/building-off.png" alt="">
            <img src="h5imgs/building-on.png" class="on" alt="">
          </div>
        </div>
      </div>
      
    </div>
    <!-- 天黑遮罩 -->
    <div class="mask1">
      <div class="mask1-text">等待回归......</div>
    </div>
    <div class="p2" id="p2">
      <div class="line">
        <img src="./h5imgs/page2/line.png" alt="">
      </div>
      <div class="star1" id="star1">
        <img src="./h5imgs/page2/star.png" alt="">
      </div>
      <div class="star2" id="star2">
        <img src="./h5imgs/page2/bigStar.png" alt="">
      </div>
      <div class="hand">
        <img class="hand1" src="./h5imgs/page2/hand1.png" alt="">
        <img class="hand2" src="./h5imgs/page2/hand2.png" alt="">
        <img class="hand3" src="./h5imgs/page2/hand3.png" alt="">
        <img class="hand4" src="./h5imgs/page2/hand4.png" alt="">
        <img class="hand5" src="./h5imgs/page2/hand5.png" alt="">
        <img class="hand6" src="./h5imgs/page2/hand6.png" alt="">
        <img class="hand7" src="./h5imgs/page2/hand7.png" alt="">
        <img class="hand8" src="./h5imgs/page2/hand8.png" alt="">
        <img class="hand9" src="./h5imgs/page2/hand9.png" alt="">
      </div>
      <div class="light">
        <img class="light1" src="./h5imgs/page2/light.png" alt="">
        <img class="light2" src="./h5imgs/page2/light2.png" alt="">
        <img class="light3" src="./h5imgs/page2/light3.png" alt="">
      </div>
      <div class="yeLight"></div>
    </div>
  </div>
  <script>
    window.onload = function () {
      var soundP1_1 = new Howl({
        src:['audios/typing.mp3']
      })
      soundP1_1.playStatus = true
      
       var controller1 = new ScrollMagic.Controller();
        var tl = new TimelineMax({
          onUpdate:function () {
            if(soundP1_1.playStatus) {
              soundP1_1.play()
              soundP1_1.playStatus = false
              var timer = setTimeout(function() {
                soundP1_1.playStatus = true
              },1000)
            }
          }
          
        })
        //文字
        tl.add("begin");
        tl.to("#p1 .line-1", 0, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-1", 5, {
          left: '100%', 
          ease: Linear.easeOut,
          
        })
        tl.to("#p1 .line-2", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-2", 5, {
          left: '100%',
          ease: Linear.easeOut,
          onStart:function () {
            // vdo.muted = false;
          }
        })
        tl.to(".line-3", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-3", 5, {
          left: '100%',  
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-4", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-4", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-5", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-5", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-6", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-6", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1 .line-7", .1, {
          opacity: 1, 
          ease: Linear.easeOut
        })
        tl.to("#p1 .mark-7", 5, {
          left: '100%', 
          ease: Linear.easeOut
        })
        tl.to("#p1",12, {
          backgroundPosition: "0 100%", 
          ease: Linear.easeOut,
        },0)
        // 树木和楼宇
        tl.to("#p1 .ph", .2, {opacity: 1},12);
        tl.to("#p1 .tree1", 6, {left:-$('#p1 .tree1').width()-10},12);
        tl.to("#p1 .tree2", 5, {left: -$('#p1 .tree2').width()-50},12);
        tl.to("#p1 .tree3", 5, {left:-$('#p1 .tree3').width()-100},12);
        tl.to("#p1 .tree4", 6, {left: -$('#p1 .tree4').width()+150},12);
        tl.to("#p1 .tree5", 5, {left: -$('#p1 .tree5').width()+750},12);
        tl.to("#p1 .tree6", 6, {left: -$('#p1 .tree6').width()+1150},12);
        // tl.to("#p1 .tree-front", 12, {left: -$('#p1 .tree-front').width()+1150},12,'label');
        // tl.to("#p1 .tree-back", 8, {left: -$('#p1 .tree-back').width()+750},12);
        
        tl.to("#p1 .ph-inner", 5, {xPercent: -60},18);
        tl.from("#p1 .on", 8, {opacity: 1},'-=8');
        tl.to("#p1 #bird", 2, {
          css: {
            top:0,
            right:0,
            background: 'url(h5imgs/bird-1.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },1)
        tl.to("#p1 #bird", 2, {
          css: {
            top:150,
            right:200,
            background: 'url(h5imgs/bird-2.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },2)
        tl.to("#p1 #bird", 1, {
          css: {
            top:260,
            right:330,
            background: 'url(h5imgs/bird-3.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },3)
        tl.to("#p1 #bird", 1, {
          css: {
            top:460,
            right:466,
            background: 'url(h5imgs/bird-4.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },4)
        tl.to("#p1 #bird", 1, {
          css: {
            top:770,
            right:490,
            background: 'url(h5imgs/bird-5.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },5)
        tl.to("#p1 #bird", 1, {
          css: {
            top:1030,
            right:290,
            background: 'url(h5imgs/bird-6.png) center no-repeat'
          },
          ease: Linear.easeOut,
         
        },6)
        tl.to("#p1 #bird", 1, {
          css: {
            top:1200,
            right:-300,
          },
          ease: Linear.easeOut,
        },7)

        // 天黑
        tl.to('.mask1',1,{
          opacity:1,
          ease: Linear.easeOut,
        })
        var scene = new ScrollMagic.Scene({duration: 5000})
        .triggerHook(0)
        .triggerElement('#p1')
        .setPin("#p1")
        .setTween(tl)
        // .addIndicators({
        //     name: "p1"
        // }) 
        .addTo(controller1);


        // 场景2
        var controller2 = new ScrollMagic.Controller();
        var tl2 = new TimelineMax({
          
        })
        tl2.to('.mask1',.5,{
          opacity:0,
          ease: Linear.easeOut,
        },0)
        tl2.to('#p2 .star1',1,{
          opacity:1,
          top:10,
          ease: Linear.easeOut,
        },0)
        tl2.to('#p2 .star2',1,{
          opacity:1,
          top:20,
          ease: Linear.easeOut,
        },1)
        tl2.to("#p2",18, {
          backgroundPosition: "0 100%", 
          ease: Linear.easeOut,
        }, 'p2Label')
        tl2.to('#p2 .star1',3,{
          top:-1500,
          ease: Linear.easeOut,
        },'p2Label')
        tl2.to('#p2 .star2',4,{
          top:-2000,
          ease: Linear.easeOut
        },'p2Label')
        tl2.to('#p2 .line',4,{
          css:{
            top:-2000,
          },
          ease: Linear.easeOut,
        },'p2Label')
        tl2.addLabel("handLabel",6)
        tl2.to('#p2 .hand',9,{
          left:0,
          top:-800,
          ease: Linear.easeOut
        },'handLabel')
        tl2.to('#p2 .hand1',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel')
        tl2.to('#p2 .hand2',1,{
          right:0,
          ease: Linear.easeOut
        },'handLabel+=1')
        tl2.to('#p2 .hand3',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=2')
        tl2.to('#p2 .hand4',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=3')
        tl2.to('#p2 .hand5',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=4')
        tl2.to('#p2 .hand6',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=5')
        tl2.to('#p2 .hand7',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=6')
        tl2.to('#p2 .hand8',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=7')
        tl2.to('#p2 .hand9',1,{
          left:0,
          ease: Linear.easeOut
        },'handLabel+=8')
        tl2.to('#p2 .light1',1,{
          left:0,
          opacity:.5,
          ease: Linear.easeOut
        },'handLabel+=11')
        tl2.to('#p2 .light2',1,{
          left:0,
          opacity:.5,
          ease: Linear.easeOut
        },'handLabel+=12')
        tl2.to('#p2 .light3',1,{
          left:0,
          opacity:.5,
          ease: Linear.easeOut
        },'handLabel+=13')
        tl2.to('#p2 .yeLight',1,{
          opacity:1,
          ease: Linear.easeOut
        },'-=1')
        var scene2 = new ScrollMagic.Scene({duration: 2000})
        
        .triggerHook(-1)
        .triggerElement('#p2')
        .setPin("#p2")
        .setTween(tl2)
        .addIndicators({
            name: "p2"
        }) 
        .addTo(controller2);
    }
  </script>
</body>

</html>